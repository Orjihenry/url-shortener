{% extends 'base.html' %}
{% block title %} Home {% endblock %}
{% block content %}
<!-- Section: Design Block -->


<section class="container">
  <div class="container px-4 px-md-5 text-center text-lg-start mt-5">
    <div class="card bg-glass text-center">
      <div class="card-body px-4 py-4 px-md-5">
        <h1 class="text-center mb-3">URL Shortener</h1>
        <h4 class="mb-4">Simplify Your Links</h4>
        {% with messages = get_flashed_messages() %}
          {% if messages %}
              <ul class="flashes">
                  {% for message in messages %}
                      <li>{{ message }}</li>
                  {% endfor %}
              </ul>
          {% endif %}
        {% endwith %}
      
        <form method="POST" action="/" class="">
          {{ form.hidden_tag() }}
          {% if current_user.is_authenticated %}
          <div class="form-outline mb-4" data-mdb-input-init>
            {{ form.long_url(type="url", class="form-control form-control-lg", id="formControlDefault") }}
            {{ form.long_url.label(class="form-label") }}
          </div>
          <div class="form-outline mb-4" data-mdb-input-init>
            {{ form.custom_url(class="form-control form-control-lg", maxlength="16", id="formControlDefault") }}
            {{ form.custom_url.label(class="form-label") }}
          </div>
          {% else %}
          <div class="form-outline mb-4" data-mdb-input-init>
            {{ form.long_url(type="url", class="form-control form-control-lg", id="formControlDefault") }}
            {{ form.long_url.label(class="form-label") }}
          </div>
          {% endif %}

          {% if short_url %}
          <div class="form-outline mb-4" data-mdb-input-init>
            <input type="text" class="form-control" id="formControlDefault" disabled
              value="{{ request.url_root }}{{ short_url }}">
            {{ form.short_url.label(class="form-label") }}
          </div>
          {% else %}
          <div class="form-outline mb-4" data-mdb-input-init>
            <input type="text" class="form-control" id="form3Example2" disabled>
            {{ form.short_url.label(class="form-label") }}
          </div>
          {% endif %}
          {{ form.submit(class="btn btn-primary btn-block mb-4 btn-sub-val btn-short") }}
        </form>
        <p class="">
          Shorten long URLs in seconds and monitor performance with real-time statsâ€”all for free.
        </p>
      </div>
    </div>
</section>

<section class="container">
  <div class="container px-4 px-md-5 text-center text-lg-start mt-5">
    <div class="card bg-glass text-center">
      <div class="card-body px-4 py-4 px-md-5 text-center">
        <h4 class="mb-4">Want more? Go beyond basic!</h4>
        <p>
          Create an account for custom URLs, real-time tracking, QR code generation, a powerful dashboard and a fully featured link management suite.
        </p>
        <a href="{{ url_for('reg_user') }}" class="me-2 p-3 btn btn-primary">Create an Account</a>
      </div>
    </div>
  </div>
</section>

<script>
  import { Input, initMDB } from "mdb-ui-kit";

  initMDB({ Input });
</script>
{% endblock %}